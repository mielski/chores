<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Household</title>
  </head>

  <body>
    <div class="container">
      <h2 class="text-center">Huistaakjes</h2>
      <p class="d-none d-lg-block text-center">
        houd je huistaakjes en zakgeld bij
      </p>

      <!-- Pills navs -->
      <div class="col-8 col-md mb-5 mx-auto">
        <ul class="nav nav-pills mb-3" id="ex1" role="tablist">
          <li
            class="nav-item border-1 rounded-1 border-info me-3"
            role="presentation"
          >
            <a
              data-bs-toggle="tab"
              data-bs-target="#ex1-pills-1"
              class="nav-link active"
              id="ex1-tab-1"
              href="#ex1-pills-1"
              role="tab"
              aria-controls="ex1-pills-1"
              aria-selected="true"
              >üìã Taakjes</a
            >
          </li>
          <li
            class="nav-item bg-light border border-dark-subtle rounded-2 me-3"
            role="presentation"
          >
            <a
              data-bs-toggle="tab"
              data-bs-target="#ex1-pills-2"
              class="nav-link"
              id="ex1-tab-2"
              href="#ex1-pills-2"
              role="tab"
              aria-controls="ex1-pills-2"
              aria-selected="false"
              >ü™ô Zakgeld</a
            >
          </li>
          <li
            class="nav-item bg-light border border-dark-subtle rounded-2 me-3"
            role="presentation"
          >
            <a
              data-toggle="tab"
              class="nav-link"
              id="ex1-tab-3"
              href="#ex1-pills-3"
              role="tab"
              aria-controls="ex1-pills-3"
              aria-selected="false"
              >‚öôÔ∏è Instellingen</a
            >
          </li>
        </ul>
      </div>
      <!-- Pills navs -->

      <!-- Pills content -->
      <div class="tab-content" id="ex1-content">
        <div
          class="tab-pane fade show active"
          id="ex1-pills-1"
          role="tabpanel"
          aria-labelledby="ex1-tab-1"
        >
          <div class="tab-pane fade show active" id="ex1-pills-1">
            <!-- Pane-specific toolbar -->
            <div
              class="d-flex justify-content-end justify-content-lg-between align-items-center mb-3 p-2 bg-light rounded"
            >
              <p class="h5 mb-0 d-none d-lg-block">Weektaakjes</p>
              <div class="btn-group btn-group-sm">
                <button class="btn btn-outline-warning" id="reset-tasks">
                  <i class="fas fa-undo me-1"></i>Reset
                </button>
                <button class="btn btn-outline-success" id="end-week-tasks">
                  <i class="fas fa-calendar-check me-1"></i>Einde Week
                </button>
                <button
                  class="btn btn-outline-primary"
                  id="undo-tasks"
                  disabled
                >
                  <i class="fas fa-undo me-1"></i>Ongedaan maken
                </button>
              </div>
            </div>
            <!-- Your existing content -->
          </div>
          <div class="row justify-content-center">
            <div class="col-md-8 col-lg mb-2 mx-2">
              <div class="card shadow">
                <div class="user-card card-body" data-user="Luca">
                  <h3
                    class="user-card__title card-title text-dark d-flex align-items-center"
                  >
                    Luca
                  </h3>
                  <div class="d-flex align-items-center gap-2 text-muted mt-2">
                    <i class="fas fa-bullseye me-1" aria-hidden="true"></i>
                    <span class="user-card__chore-count">0 / 7 taakjes</span>
                  </div>
                  <div class="mt-3">
                    <div class="progress mb-2" style="height: 12px">
                      <div
                        class="progress-bar user-card__progress"
                        style="width: 0%"
                      ></div>
                    </div>
                    <p class="small text-muted mt-2 user-card__remaining">
                      nog 7 te gaan
                    </p>
                  </div>
                  <div class="mt-3">
                    <div class="d-flex gap-2 mb-3">
                      <input
                        class="form-control form-control-sm flex-fill user-card__new-chore-input"
                        placeholder="Add a chore..."
                        value=""
                      />
                      <button
                        class="btn btn-primary btn-sm flex-shrink-0 user-card__new-chore-button"
                      >
                        <i class="fas fa-plus" aria-hidden="true"></i>
                      </button>
                    </div>
                    <div
                      class="chore-list"
                      style="max-height: 300px; overflow-y: auto"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-8 col-lg mx-2">
              <div class="card shadow">
                <div class="user-card card-body" data-user="Milou">
                  <h3 class="user-card__title card-title text-dark">Milou</h3>
                  <div class="d-flex align-items-center gap-2 text-muted mt-2">
                    <i class="fas fa-bullseye me-1" aria-hidden="true"></i>
                    <span class="user-card__chore-count">0 / 7 taakjes</span>
                  </div>
                  <div class="mt-3">
                    <div class="progress mb-2" style="height: 12px">
                      <div
                        class="user-card__progress progress-bar"
                        style="width: 0%"
                      ></div>
                    </div>
                    <p class="user-card__remaining small text-muted mt-2">
                      nog 7 te gaan
                    </p>
                  </div>
                  <div class="mt-3">
                    <div class="d-flex gap-2 mb-3">
                      <input
                        class="form-control form-control-sm flex-fill user-card__new-chore-input"
                        placeholder="Add a chore..."
                        value=""
                      /><button
                        class="btn btn-primary btn-sm flex-shrink-0 user-card__new-chore-button"
                      >
                        <i class="fas fa-plus" aria-hidden="true"></i>
                      </button>
                    </div>
                    <div
                      class="chore-list"
                      style="max-height: 300px; overflow-y: auto"
                    >
                      <p class="small text-muted text-center py-4">
                        No chores yet this week
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          class="tab-pane fade"
          id="ex1-pills-2"
          role="tabpanel"
          aria-labelledby="ex1-tab-2"
        >
          <div class="row justify-content-center">
            <div class="col-lg-10">
              <!-- Toolbar with view filter and process button -->
              <div
                class="allowance-toolbar d-flex justify-content-between justify-content-md-end align-items-center mb-3 gap-2"
              >
                <div class="dropdown me-auto me-md-2">
                  <button
                    class="btn btn-sm btn-outline-secondary dropdown-toggle"
                    type="button"
                    id="allowance-view-dropdown"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    Weergave: Alle
                  </button>
                  <ul
                    class="dropdown-menu dropdown-menu-end"
                    aria-labelledby="allowance-view-dropdown"
                  >
                    <li>
                      <button
                        class="dropdown-item"
                        type="button"
                        data-allowance-view="all"
                      >
                        Alle
                      </button>
                    </li>
                    <li>
                      <button
                        class="dropdown-item"
                        type="button"
                        data-allowance-view="Milou"
                      >
                        Alleen Milou
                      </button>
                    </li>
                    <li>
                      <button
                        class="dropdown-item"
                        type="button"
                        data-allowance-view="Luca"
                      >
                        Alleen Luca
                      </button>
                    </li>
                  </ul>
                </div>

                <button
                  type="button"
                  class="btn btn-sm btn-primary allowance-toolbar__process"
                  title="Week verwerken"
                >
                  <i class="fas fa-play"></i>
                </button>
              </div>

              <div class="row g-3">
                <!-- Milou allowance card -->
                <div class="col-md-6">
                  <div class="card shadow allowance-card" data-user="Milou">
                    <div class="card-body">
                      <div
                        class="d-flex justify-content-between align-items-center mb-2"
                      >
                        <h5 class="card-title mb-0">Milou</h5>
                        <span
                          class="badge bg-success-subtle text-success small allowance-card__currency"
                          >EUR</span
                        >
                      </div>

                      <div class="p-3 rounded mb-3 bg-success-subtle">
                        <p class="mb-1 small text-muted">Huidig saldo</p>
                        <p
                          class="mb-0 fw-semibold text-success allowance-card__balance"
                        >
                          ‚Ç¨ 0,00
                        </p>
                      </div>

                      <div class="mb-3 allowance-card__weekly">
                        <div class="d-flex justify-content-between small mb-1">
                          <span class="text-muted">Zakgeld per week</span>
                          <span class="text-success allowance-card__weekly-base"
                            >‚Ç¨ 0,00</span
                          >
                        </div>
                        <div class="d-flex justify-content-between small mb-1">
                          <span class="text-muted">Bonus uit taakjes</span>
                          <span
                            class="text-success allowance-card__weekly-bonus"
                            >‚Ç¨ 0,00</span
                          >
                        </div>
                        <div
                          class="d-flex justify-content-between pt-2 border-top small fw-semibold"
                        >
                          <span>Totaal deze week</span>
                          <span
                            class="text-success allowance-card__weekly-total"
                            >‚Ç¨ 0,00</span
                          >
                        </div>
                      </div>

                      <div class="mb-3 allowance-card__transactions">
                        <p class="small text-muted mb-1">Laatste transacties</p>
                        <ul
                          class="list-unstyled mb-0 allowance-card__transactions-list"
                        >
                          <li class="small text-muted fst-italic">
                            Nog geen transacties
                          </li>
                        </ul>
                      </div>

                      <div class="pt-2 border-top">
                        <div
                          class="d-flex justify-content-between align-items-center mt-2 flex-wrap gap-2"
                        >
                          <button
                            type="button"
                            class="btn btn-sm btn-outline-primary allowance-card__add-transaction"
                          >
                            <i class="fas fa-plus me-1"></i>Transactie toevoegen
                          </button>
                          <button
                            type="button"
                            class="btn btn-sm btn-outline-secondary allowance-card__undo-transaction"
                          >
                            <i class="fas fa-undo me-1"></i>Laatste transactie
                            ongedaan maken
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Luca allowance card -->
                <div class="col-md-6">
                  <div class="card shadow allowance-card" data-user="Luca">
                    <div class="card-body">
                      <div
                        class="d-flex justify-content-between align-items-center mb-2"
                      >
                        <h5 class="card-title mb-0">Luca</h5>
                        <span
                          class="badge bg-success-subtle text-success small allowance-card__currency"
                          >EUR</span
                        >
                      </div>

                      <div class="p-3 rounded mb-3 bg-success-subtle">
                        <p class="mb-1 small text-muted">Huidig saldo</p>
                        <p
                          class="mb-0 fw-semibold text-success allowance-card__balance"
                        >
                          ‚Ç¨ 0,00
                        </p>
                      </div>

                      <div class="mb-3 allowance-card__weekly">
                        <div class="d-flex justify-content-between small mb-1">
                          <span class="text-muted">Zakgeld per week</span>
                          <span class="text-success allowance-card__weekly-base"
                            >‚Ç¨ 0,00</span
                          >
                        </div>
                        <div class="d-flex justify-content-between small mb-1">
                          <span class="text-muted">Bonus uit taakjes</span>
                          <span
                            class="text-success allowance-card__weekly-bonus"
                            >‚Ç¨ 0,00</span
                          >
                        </div>
                        <div
                          class="d-flex justify-content-between pt-2 border-top small fw-semibold"
                        >
                          <span>Totaal deze week</span>
                          <span
                            class="text-success allowance-card__weekly-total"
                            >‚Ç¨ 0,00</span
                          >
                        </div>
                      </div>

                      <div class="mb-3 allowance-card__transactions">
                        <p class="small text-muted mb-1">Laatste transacties</p>
                        <ul
                          class="list-unstyled mb-0 allowance-card__transactions-list"
                        >
                          <li class="small text-muted fst-italic">
                            Nog geen transacties
                          </li>
                        </ul>
                      </div>

                      <div class="pt-2 border-top">
                        <div
                          class="d-flex justify-content-between align-items-center mt-2 flex-wrap gap-2"
                        >
                          <button
                            type="button"
                            class="btn btn-sm btn-outline-primary allowance-card__add-transaction"
                          >
                            <i class="fas fa-plus me-1"></i>Transactie toevoegen
                          </button>
                          <button
                            type="button"
                            class="btn btn-sm btn-outline-secondary allowance-card__undo-transaction"
                          >
                            <i class="fas fa-undo me-1"></i>Laatste transactie
                            ongedaan maken
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          class="tab-pane fade"
          id="ex1-pills-3"
          role="tabpanel"
          aria-labelledby="ex1-tab-3"
        >
          Tab 3 content
        </div>
      </div>
      <!-- Pills content -->
      <!-- Tabs content -->
      <!-- old progress bars
    <div class="progressholders d-flex flex-column my-3 p-2 border border-1 rounded-1 border-info">
      <p class="mb-0">Luca</p>
      <div class="progress mb-2">
        <div id="progress-luca" class="progress-bar" role="progressbar" style="width: 0%;"
          aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
          Description
        </div>
      </div>
      <p class="mb-0">Milou</p>
      <div class="progress">
        <div id="progress-milou" class="progress-bar" role="progressbar" style="width: 0%;"
          aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
          Description
        </div>
      </div>
    </div>
     -->
      <div class="main-buttons-control d-flex m-3">
        <a role="button" class="btn btn-sm btn-secondary me-2" href="/config">
          ‚öôÔ∏è<span class="visually-hidden">Settings</span>
        </a>
        <a role="button" class="btn btn-sm btn-light ms-2" href="/logout">üëü</a>
      </div>
      <footer class="text-center text-muted small mt-4 mb-2">
        <span id="app-version">Loading version...</span> ‚Ä¢
        <a class="a small" href="docs">API Docs</a>
      </footer>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
      <div
        id="notification-toast"
        class="toast"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="toast-header">
          <i id="toast-icon" class="fas fa-info-circle text-info me-2"></i>
          <strong id="toast-title" class="me-auto">Notification</strong>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
        <div class="toast-body" id="toast-message">Default message</div>
      </div>
    </div>
    <!-- Passcode Modal -->
    <div
      class="modal fade"
      id="passcodeModal"
      tabindex="-1"
      aria-labelledby="passcodeModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="passcodeModalLabel">
              Bevestig met toegangscode
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Sluiten"
            ></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="passcode-input" class="form-label"
                >Voer toegangscode in</label
              >
              <input
                type="password"
                class="form-control"
                id="passcode-input"
                autocomplete="off"
              />
              <div id="passcode-error" class="form-text text-danger d-none">
                Onjuiste code, probeer het opnieuw.
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Annuleren
            </button>
            <button type="button" class="btn btn-primary" id="passcode-confirm">
              Bevestigen
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- Transaction Modal -->
    <div
      class="modal fade"
      id="transactionModal"
      tabindex="-1"
      aria-labelledby="transactionModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="transactionModalLabel">
              Transactie toevoegen
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="transactionForm">
              <input type="hidden" id="transaction-user-id" />
              <div class="mb-3">
                <label for="transaction-amount" class="form-label"
                  >Bedrag</label
                >
                <input
                  type="number"
                  step="0.01"
                  class="form-control"
                  id="transaction-amount"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="transaction-type" class="form-label">Type</label>
                <select class="form-select" id="transaction-type">
                  <option value="ALLOWANCE">Zakgeld</option>
                  <option value="BONUS">Bonus</option>
                  <option value="MANUAL" selected>Handmatig</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="transaction-description" class="form-label"
                  >Omschrijving</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="transaction-description"
                  placeholder="Bijvoorbeeld: extra klusje, cadeautje..."
                />
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Annuleren
            </button>
            <button type="button" class="btn btn-primary" id="save-transaction">
              Opslaan
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="config.js"></script>
    <script type="module" src="index.js"></script>
    <script defer>
      // Fetch and display version
      fetch("/api/version")
        .then((res) => res.json())
        .then((data) => {
          document.getElementById(
            "app-version"
          ).textContent = `version ${data.version}`;
        })
        .catch(() => {
          document.getElementById("app-version").textContent = "";
        });
    </script>
  </body>
</html>
